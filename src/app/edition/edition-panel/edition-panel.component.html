
<div class="card mt-3">
  <div class="card-header container">
    <div class="container">
      <div class="row justify-content-between">
        <div class="col-8 title">
          <div class="fw-bold fs-5">{{ beautifyName(model?.constructor?.name) }}</div>
        </div>
        <div class="col-2 actions text-end">
          <button mat-icon-button color="primary" [routerLink]="['novo']"><mat-icon>add</mat-icon></button>
          <button mat-icon-button color="dark" (click)="onRefresh()"><mat-icon>refresh</mat-icon></button>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body table-responsive">

    <mat-drawer-container class="container" autosize>
      <mat-drawer #drawer class="sidenav" position="end" (closed)="onExitEditMode()">
        <app-table-form [modelParam]="modelEdit" *ngIf="modelEdit !== undefined && ['edit'].includes(editionMode)" (save)="onSave()"></app-table-form>
      </mat-drawer>
      <div class="sidenav-content">

        <table class="table table-hover table-sm" *ngIf="items$ | async as items; else loadingError, loading">
          <thead>
            <tr>
              <th class="align-middle" *ngFor="let column of model.fields">{{ beautifyName(column.name) }}</th>
              <th class="align-middle text-center">ACTIONS</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of items">
              <td class="align-middle" *ngFor="let column of model.fields">{{ getKeys(item, column.name) }}</td>
              <td class="align-middle text-center actions">
                <button mat-icon-button color="primary" aria-label="Edit" class="mb-1 btn-sm" (click)="onEdit(item)">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="primary" aria-label="Delete" class="mb-1 btn-sm">
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </tr>
          </tbody>
        </table>

        <ng-template #loading>
          <span>Loading items...</span>
        </ng-template>

        <ng-template #loadingError>
          <div *ngIf="error$ | async; else loading">
            Erro ao carregar items. Tente novamente mais tarde.
          </div>
          <ng-template #loading>
            <span>Loading items...</span>
          </ng-template>
        </ng-template>

      </div>
    </mat-drawer-container>

  </div>
</div>

<!-- <h2>{{ beautifyName(model?.constructor?.name) }}</h2>
<app-table-form [modelParam]="model" *ngIf="model && ['edit'].includes(editionMode)"></app-table-form> -->

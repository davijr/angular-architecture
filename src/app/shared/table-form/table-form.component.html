
<!-- 
    TODO:
    OK > 1- Remover tooltip position and color.
    OK > 2- Css for turn borders to red on invalid fields.
    OK > 3- Include red * to required fields.
    OK > 4- combobox
    OK > 5- Submit validation.
    6- Modificar subscribe dos combos por async pipes (utilizando observable)
    7- Loading da grid ou pra toda a tela
 -->

<div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="form-group" *ngFor="let field of model?.fields" [ngClass]="applyCssError(field.name)">
            <div *ngIf="['text', 'number', 'email'].includes(field.type)">
                <label for="{{ field.name }}">{{ field.label }}<span class="required">{{ isRequired(field.name) ? ' *' : '' }}</span></label>
                <input type="{{ field.type }}" id="{{ field.name }}" class="form-control" [ngClass]="applyCssError(field.name)"
                    placeholder="{{ field.label }}" formControlName="{{ field.name }}" autocomplete="off" maxlength="{{ field.length }}">
            </div>
            <div *ngIf="['relationship'].includes(field.type)">
                <label for="{{ field.name }}">{{ field.label }}<span class="required">{{ isRequired(field.name) ? ' *' : '' }}</span></label>
                <select name="{{ field.name }}" id="{{ field.name }}" class="form-select"
                    formControlName="{{ field.name }}" [ngClass]="applyCssError(field.name)">
                    <option [value]="null">Select</option>
                    <option *ngFor="let item of getOptions(field.relationship?.name ?? '')" [value]="item[field.relationship?.idAttribute ?? '']">
                        {{ getShowFields(field.relationship?.name ?? '', item) }}
                    </option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <button mat-raised-button color="default" type="button" (click)="onCancel()">Cancel</button>
            <!-- <button mat-raised-button color="default" type="button" (click)="onClear()">Clear</button> -->
            <button mat-raised-button color="primary" [disabled]="!form.valid">Save</button>
        </div>
    </form>

    <app-debug-form [form]="form" *ngIf="debugForms"></app-debug-form>
</div>